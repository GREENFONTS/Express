# Migration `20200620143210-tdh`

This migration has been generated by GREENFONTS at 6/20/2020, 2:32:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `greenfonts`.`_UserFollows` (
`A` varchar(191) NOT NULL ,`B` varchar(191) NOT NULL 
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `greenfonts`.`likes` ADD COLUMN `id` int NOT NULL  AUTO_INCREMENT;

CREATE UNIQUE INDEX `_UserFollows_AB_unique` ON `greenfonts`.`_UserFollows`(`A`,`B`)

CREATE  INDEX `_UserFollows_B_index` ON `greenfonts`.`_UserFollows`(`B`)

CREATE UNIQUE INDEX `likes.Email_Postid` ON `greenfonts`.`likes`(`Email`,`Postid`)

ALTER TABLE `greenfonts`.`_UserFollows` ADD FOREIGN KEY (`A`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`_UserFollows` ADD FOREIGN KEY (`B`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`comment` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`likes` ADD FOREIGN KEY (`Postid`) REFERENCES `greenfonts`.`posts`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`likes` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`posts` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`todo` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE `greenfonts`.`_migration`;

DROP TABLE `greenfonts`.`_userfollows`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200620143210-tdh
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,79 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource mysql {
+  provider = "mysql"
+  url      = env("DATABASE_URL")
+}
+
+model comment {
+  Comment String
+  Email   String?
+  id      String    @id @default(cuid())
+  Postid  String?
+  users   users?  @relation(fields: [Email], references: [Email])
+  @@index([Email], name: "Email")
+}
+
+model likes {
+  id     Int    @default(autoincrement())
+  Email  String? 
+  Postid String
+  post   posts @relation(fields:[Postid], references:[id])
+  users      users?    @relation(fields: [Email], references: [Email])
+  @@unique([Email,Postid])
+}
+
+model posts {
+  Author     String?
+  Avatar     String?
+  Content    String?
+  Created_at DateTime? @default(now())
+  Email      String?
+  id         String    @id @default(cuid())
+  Title      String?
+   users      users?    @relation(fields: [Email], references: [Email])
+   Likes      likes[]
+  @@index([Email], name: "Email")
+}
+
+model profile {
+  About      String?
+  Email      String  @id
+  Hobbies    String?
+  Name       String?
+  Occupation String?
+  Skills     String?
+}
+
+model todo {
+  Content String?
+  Email   String?
+  id      String  @id @default(cuid())
+  Task    String?
+  users   users?  @relation(fields: [Email], references: [Email])
+  @@index([Email], name: "Email")
+}
+
+model users {
+  Avatar    String?
+  Email     String    @id
+  Name      String?
+  followedBy  users[]   @relation("UserFollows", references: [Email])
+  following   users[]   @relation("UserFollows", references: [Email])
+  Password  String?
+  Password2 String?
+  comment   comment[]
+  posts      posts[]
+  todo       todo[]
+  Likes      likes[]
+}
+
+
+
+
+
+
+
+
```


