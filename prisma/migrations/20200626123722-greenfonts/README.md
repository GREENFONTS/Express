# Migration `20200626123722-greenfonts`

This migration has been generated by GREENFONTS at 6/26/2020, 12:37:22 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."comment" (
"comment" text   ,"email" text   ,"id" text  NOT NULL ,"postid" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."likes" (
"email" text   ,"id" text  NOT NULL ,"postid" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."posts" (
"author" text   ,"avatar" text   ,"content" text   ,"created_at" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,"email" text   ,"id" text  NOT NULL ,"postlike" integer   ,"title" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."profile" (
"about" text   ,"email" text  NOT NULL ,"hobbies" text   ,"name" text   ,"occupation" text   ,"skills" text   ,
    PRIMARY KEY ("email"))

CREATE TABLE "public"."todo" (
"content" text   ,"email" text   ,"id" text  NOT NULL ,"task" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."users" (
"Avatar" text   ,"Email" text  NOT NULL ,"Name" text   ,"Password" text   ,"Password2" text   ,
    PRIMARY KEY ("Email"))

CREATE TABLE "public"."_UserFollows" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE  INDEX "Email" ON "public"."comment"("email")

CREATE  INDEX "Email" ON "public"."posts"("email")

CREATE  INDEX "Email" ON "public"."todo"("email")

CREATE UNIQUE INDEX "_UserFollows_AB_unique" ON "public"."_UserFollows"("A","B")

CREATE  INDEX "_UserFollows_B_index" ON "public"."_UserFollows"("B")

ALTER TABLE "public"."comment" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("Email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."likes" ADD FOREIGN KEY ("postid")REFERENCES "public"."posts"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."likes" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("Email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."posts" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("Email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."todo" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("Email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("A")REFERENCES "public"."users"("Email") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("B")REFERENCES "public"."users"("Email") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200626123722-greenfonts
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,72 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource postgresql {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model comment {
+  comment String?
+  email   String?
+  id      String  @id @default(cuid())
+  postid  String?
+  users   users?  @relation(fields: [email], references: [Email])
+  @@index([email], name: "Email")
+}
+
+model likes {
+  email  String?
+  postid String 
+  id     String   @id @default(cuid())
+  post   posts @relation(fields:[postid], references:[id])
+  users      users?    @relation(fields: [email], references: [Email])
+}
+ 
+model posts {
+  author     String?
+  avatar     String?
+  content    String?
+  created_at DateTime? @default(now())
+  email      String?
+  id         String    @id @default(cuid())
+  postlike   Int?
+  title      String?
+  users      users?    @relation(fields: [email], references: [Email])
+  Likes      likes[]
+
+  @@index([email], name: "Email")
+}
+
+model profile {
+  about      String?
+  email      String  @id
+  hobbies    String?
+  name       String?
+  occupation String?
+  skills     String?
+}
+
+model todo {
+  content String?
+  email   String?
+  id      String  @id @default(cuid())
+  task    String?
+  users   users?  @relation(fields: [email], references: [Email])
+   @@index([email], name: "Email")
+}
+
+model users {
+  Avatar    String?
+  Email     String    @id
+  Name      String?
+  followedBy  users[]   @relation("UserFollows", references: [Email])
+  following   users[]   @relation("UserFollows", references: [Email])
+  Password  String?
+  Password2 String?
+  comment   comment[]
+  posts      posts[]
+  todo       todo[]
+  Likes      likes[]
+}
```


