# Migration `20200702212721-greenfonts`

This migration has been generated by GREENFONTS at 7/2/2020, 9:27:21 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE  INDEX "email" ON "public"."todo"("email")

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("A")REFERENCES "public"."users"("email") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("B")REFERENCES "public"."users"("email") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."comment" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."likes" ADD FOREIGN KEY ("postid")REFERENCES "public"."posts"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."likes" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."posts" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("email") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."todo" ADD FOREIGN KEY ("email")REFERENCES "public"."users"("email") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200702212721-greenfonts
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,73 @@
+generator client {
+  provider = "prisma-client-js"
+  output   = "./client"
+}
+
+datasource postgresql {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model comment {
+  comment String?
+  email   String?
+  id      String  @id  @default(cuid())
+  postid  String?
+  users   users?  @relation(fields: [email], references: [email])
+  @@index([email], name: "Email")
+}
+
+model likes {
+  email  String?
+  id     String  @id
+  postid String
+  post   posts     @relation(fields:[postid], references:[id])
+  users  users?    @relation(fields: [email], references: [email])
+}
+
+model posts {
+  author     String?
+  avatar     String?
+  content    String?
+  created_at DateTime? @default(now())
+  email      String?
+  id         String    @id @default(cuid())
+  postlike   Int?
+  title      String?
+   users      users?    @relation(fields: [email], references: [email])
+  Likes      likes[]
+
+  @@index([email], name: "email")
+}
+
+model profile {
+  about      String?
+  email      String  @id
+  hobbies    String?
+  name       String?
+  occupation String?
+  skills     String?
+}
+
+model todo {
+  content String?
+  email   String?
+  id      String  @id @default(cuid())
+  task    String?
+  users   users?  @relation(fields: [email], references: [email])
+  @@index([email], name: "email")
+}
+
+model users {
+  avatar    String?
+  email     String  @id
+  name      String?
+  password  String?
+  password2 String?
+  followedBy  users[]   @relation("UserFollows", references: [email])
+  following   users[]   @relation("UserFollows", references: [email])
+  comment   comment[]
+  posts      posts[]
+  todo       todo[]
+  Likes      likes[]
+}
```


