# Migration `20200614213500-greenfonts`

This migration has been generated by GREENFONTS at 6/14/2020, 9:35:00 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `greenfonts`.`_UserFollows` (
`A` varchar(191) NOT NULL ,`B` varchar(191) NOT NULL 
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `greenfonts`.`posts` DROP FOREIGN KEY `posts_ibfk_1`;

ALTER TABLE `greenfonts`.`todo` DROP FOREIGN KEY `todo_ibfk_1`;

ALTER TABLE `greenfonts`.`users` DROP COLUMN `followedBy`,
DROP COLUMN `following`;

CREATE UNIQUE INDEX `_UserFollows_AB_unique` ON `greenfonts`.`_UserFollows`(`A`,`B`)

CREATE  INDEX `_UserFollows_B_index` ON `greenfonts`.`_UserFollows`(`B`)

ALTER TABLE `greenfonts`.`_UserFollows` ADD FOREIGN KEY (`A`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`_UserFollows` ADD FOREIGN KEY (`B`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`posts` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `greenfonts`.`todo` ADD FOREIGN KEY (`Email`) REFERENCES `greenfonts`.`users`(`Email`) ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE `greenfonts`.`_migration`;

DROP TABLE `greenfonts`.`_userfollows`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200614213500-greenfonts
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,54 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource mysql {
+  provider = "mysql"
+  url      = env("DATABASE_URL")
+}
+
+
+
+model posts {
+  Author     String?
+  Avatar     String?
+  Content    String?
+  Created_at DateTime? @default(now())
+  Email      String?
+  id         String    @id @default(cuid())
+  Title      String?
+  users      users?    @relation(fields: [Email], references: [Email])
+
+  @@index([Email], name: "Email")
+}
+
+model profile {
+  About      String?
+  Email      String?
+  Hobbies    String?
+  Name       String  @id
+  Occupation String?
+  Skills     String?
+}
+
+model todo {
+  Content String?
+  Email   String?
+  id      String  @id @default(cuid())
+  Task    String?
+  users   users?  @relation(fields: [Email], references: [Email])
+
+  @@index([Email], name: "Email")
+}
+
+model users {
+  Avatar     String?
+  Email      String  @id
+  followedBy  users[]   @relation("UserFollows", references: [Email])
+  following   users[]   @relation("UserFollows", references: [Email])
+  Name       String?
+  Password   String?
+  Password2  String?
+  posts      posts[]
+  todo       todo[]
+}
```


